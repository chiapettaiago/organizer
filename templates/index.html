<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MailNest - Organizador de E-mails</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="logo">
                <h1>üìÆ MailNest</h1>
                <p class="subtitle">Organize seus e-mails com intelig√™ncia</p>
            </div>

            <div class="credentials">
                <h3>üîê Credenciais do Gmail</h3>
                <div class="form-group">
                    <label for="email">E-mail:</label>
                    <input type="email" id="email" placeholder="seu.email@gmail.com" required>
                </div>
                <div class="form-group">
                    <label for="senha">Senha de App:</label>
                    <input type="password" id="senha" placeholder="Senha de aplicativo" required>
                </div>
                <div class="form-group checkbox">
                    <input type="checkbox" id="excluir_inbox" checked>
                    <label for="excluir_inbox">Remover da INBOX ap√≥s organizar</label>
                </div>
            </div>

            <div class="sidebar-info">
                <h4>‚ÑπÔ∏è Como usar</h4>
                <ul>
                    <li>Configure suas credenciais acima</li>
                    <li>Use uma senha de aplicativo do Gmail</li>
                    <li>Clique em "Organizar Agora" para iniciar</li>
                    <li>Acompanhe o progresso em tempo real</li>
                </ul>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content">
            <!-- HEADER -->
            <header class="header">
                <h2>Painel de Controle</h2>
                <div class="metrics">
                    <div class="metric-card">
                        <div class="metric-value" id="metric-total">0</div>
                        <div class="metric-label">E-mails Organizados</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metric-duplicatas">0</div>
                        <div class="metric-label">Duplicatas Removidas</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metric-categorias">0</div>
                        <div class="metric-label">Categorias Criadas</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" id="metric-status">‚èπÔ∏è</div>
                        <div class="metric-label">Status</div>
                    </div>
                </div>
            </header>

            <!-- TABS -->
            <div class="tabs">
                <button class="tab-button active" onclick="openTab('executar')">‚ö° Executar</button>
                <button class="tab-button" onclick="openTab('logs')">üìã Logs</button>
                <button class="tab-button" onclick="openTab('ajuda')">‚ùì Ajuda</button>
            </div>

            <!-- TAB: EXECUTAR -->
            <div id="executar" class="tab-content active">
                <div class="actions">
                    <button class="btn btn-primary" onclick="organizarEmails()">
                        üìß Organizar Agora
                    </button>
                    <button class="btn btn-secondary" onclick="verificarDuplicatas()">
                        üîç Verificar Duplicatas
                    </button>
                </div>

                <div class="progress-section" id="progress-section" style="display: none;">
                    <div class="progress-header">
                        <span id="progress-text">Aguardando...</span>
                        <span id="progress-percent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                </div>

                <div class="live-logs" id="live-logs">
                    <h3>üì° Logs em Tempo Real</h3>
                    <div class="logs-container" id="logs-container">
                        <p class="log-empty">Nenhuma opera√ß√£o em andamento</p>
                    </div>
                </div>
            </div>

            <!-- TAB: LOGS -->
            <div id="logs" class="tab-content">
                <div class="logs-header">
                    <h3>üìú Hist√≥rico de Logs</h3>
                    <button class="btn btn-danger btn-sm" onclick="limparLogs()">üóëÔ∏è Limpar Logs</button>
                </div>
                <div class="logs-container" id="historico-logs">
                    <p class="log-empty">Nenhum log dispon√≠vel</p>
                </div>
            </div>

            <!-- TAB: AJUDA -->
            <div id="ajuda" class="tab-content">
                <div class="help-content">
                    <h3>üîß Configura√ß√£o do Gmail</h3>
                    <ol>
                        <li>Acesse <a href="https://myaccount.google.com/security" target="_blank">Configura√ß√µes de Seguran√ßa do Google</a></li>
                        <li>Ative a <strong>Verifica√ß√£o em duas etapas</strong></li>
                        <li>Acesse <strong>Senhas de app</strong></li>
                        <li>Crie uma nova senha para "MailNest"</li>
                        <li>Use essa senha no campo "Senha de App"</li>
                    </ol>

                    <h3>üìÅ Categorias Autom√°ticas</h3>
                    <ul>
                        <li><strong>Faturas:</strong> Boletos, pagamentos, notas fiscais</li>
                        <li><strong>Trabalho:</strong> Projetos, relat√≥rios, reuni√µes</li>
                        <li><strong>Pessoal:</strong> Convites, eventos, fam√≠lia</li>
                        <li><strong>Marketing:</strong> Promo√ß√µes, newsletters, ofertas</li>
                        <li><strong>Sistema:</strong> Alertas, erros, notifica√ß√µes</li>
                        <li><strong>Positivos:</strong> E-mails com sentimento positivo</li>
                        <li><strong>Problemas:</strong> E-mails com sentimento negativo</li>
                        <li><strong>Neutros:</strong> Outros e-mails</li>
                    </ul>

                    <h3>‚ö° Funcionalidades</h3>
                    <ul>
                        <li>‚úÖ Organiza√ß√£o autom√°tica por categoria</li>
                        <li>‚úÖ An√°lise de sentimento com IA</li>
                        <li>‚úÖ Detec√ß√£o e remo√ß√£o de duplicatas</li>
                        <li>‚úÖ Progresso em tempo real</li>
                        <li>‚úÖ Logs detalhados de cada opera√ß√£o</li>
                        <li>‚úÖ Interface responsiva e moderna</li>
                    </ul>

                    <h3>‚ö†Ô∏è Importante</h3>
                    <ul>
                        <li>Nunca compartilhe sua senha de aplicativo</li>
                        <li>O processo pode levar alguns minutos dependendo da quantidade de e-mails</li>
                        <li>Recomendamos fazer backup antes da primeira execu√ß√£o</li>
                        <li>A verifica√ß√£o de duplicatas √© limitada aos √∫ltimos 1000 e-mails</li>
                    </ul>
                </div>
            </div>
        </main>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
